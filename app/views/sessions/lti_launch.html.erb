<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>GitHub Classroom</title>

    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track' => true %>
  </head>
  <body class="site">
    <main class="bg-gray-light">
      <div class="container-lg p-responsive">
        <div class="blankslate blankslate-spacious blankslate-clean-background">
          <%= image_tag "classroom-logo.png", size: 128, class: "mb-3" %>
          <h3>Launching GitHub Classroom from your Learning Management System...</h3>
        </div>

        <div class="protip">
          Or <%= link_to "launch GitHub Classroom manually", post_launch_url, target: "_blank" %> if you are not automatically redirected.
        </div>
      </div>
    </main>

    <script>
      (function() {
        function insideFrame() {
          try {
            return window.self !== window.top;
          } catch (e) {
            return true;
          }
        }

        setTimeout(function() {
          if(insideFrame()) {
            window.open("<%= post_launch_url %>")
          } else {
            window.location.replace("<%= post_launch_url %>");
          }
        }, 500);
      })();
    </script>
  </body>
</html>
