<% phrase = local_assigns.fetch(:q, nil) %>

<div id="js-search-and-sort-component">
  <%= form_tag organizations_path, method: :get, class: "d-block d-sm-flex", id: "search-form", role: "search", remote: true do %>
    <div class="mb-3 mb-sm-0 mr-sm-3 flex-auto">
      <input type="search" id="search-query-field" name="q"
             class="form-control width-full js-autosearch-field"
             placeholder="Find a classroom&hellip;"
             autocomplete="off"
             aria-label="Find a classroom&hellip;"
             value="<%= phrase %>">
    </div>

    <div class="d-flex details-menu">
      <details class="details-reset details-overlay position-relative mr-2 hx_rsm" id="type-options">
        <summary class="btn">
          <i>Sort by:</i>
          <span data-menu-button>
            <%= selected_option %>
          </span>
        </summary>

        <details-menu class="select-menu-modal hx_rsm-modal position-absolute right-0" style="z-index: 99;">
          <div class="select-menu-header text-left">
            <span class="select-menu-title">Sort by:</span>
          </div>
          <div class="select-menu-list">
            <% options.each do |name, value| %>
              <label class="select-menu-item" role="menuitemradio" aria-checked="<%= selected_option.to_s == value %>" tabindex="0">
                <%= radio_button_tag "type", value, selected_option.to_s == value, "data-autosubmit": "true" %>
                <%= octicon("check", class: "select-menu-item-icon") %>
                <span class="text-normal select-menu-item-text" data-menu-button-text><%= name %></span>
              </label>
            <% end %>
          </div>
        </details-menu>
      </details>
    </div>
  <% end %>
</div>
